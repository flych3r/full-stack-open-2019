{"ast":null,"code":"import _objectSpread from\"/home/flycher/Downloads/phonebook/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/flycher/Downloads/phonebook/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./App.css';import Persons from'./components/Persons';import PersonForm from'./components/PersonForm';import Filter from'./components/Filter';import Notification from'./components/Notification';import personServices from'./services/persons';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filterName=_useState8[0],setFilterName=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),colorMessage=_useState12[0],setColorMessage=_useState12[1];useEffect(function(){personServices.getAll().then(function(response){console.log('promise fulfilled');setPersons(response);});},[]);console.log('response',persons.length,'persons');var personsToShow=persons.filter(function(person){return person.name.toLowerCase().includes(filterName.toLowerCase());});var addNewPerson=function addNewPerson(event){event.preventDefault();var found=persons.find(function(person){return person.name===newName;});if(found){var updatePerson=window.confirm(\"\".concat(found.name,\" is already in the phonebook,\")+\" replace the old number (\".concat(found.number,\")\")+\" with the new number (\".concat(newNumber,\")?\"));if(updatePerson){var changedPerson=_objectSpread({},found,{number:newNumber});personServices.update(changedPerson.id,changedPerson).then(function(response){setPersons(persons.map(function(person){return person.id!==response.id?person:response;}));setMessage(\"Updated \".concat(newName));setColorMessage(false);setTimeout(function(){setMessage(null);},5000);}).catch(function(_){setMessage(\"Information of \".concat(newName,\" was already removed from server\"));setColorMessage(true);setTimeout(function(){setMessage(null);},5000);setPersons(persons.filter(function(person){return person.id!==changedPerson.id;}));});}}else{var newPerson={name:newName,number:newNumber};personServices.create(newPerson).then(function(response){setPersons(persons.concat(response));setMessage(\"Added \".concat(newName));setColorMessage(false);setTimeout(function(){setMessage(null);},5000);});}setNewName('');setNewNumber('');};var deletePerson=function deletePerson(id,confirm){var found=persons.find(function(person){return person.id===id;});if(confirm){personServices.deleteObject(id).then(function(_){setPersons(persons.filter(function(person){return person.id!==id;}));setMessage(\"Deleted \".concat(found.name));setColorMessage(true);setTimeout(function(){setMessage(null);},5000);}).catch(function(_){setMessage(\"Information of \".concat(found.name,\" was already removed from server\"));setColorMessage(true);setTimeout(function(){setMessage(null);},5000);setPersons(persons.filter(function(person){return person.id!==id;}));});}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setFilterName(event.target.value);};return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Phonebook\"),React.createElement(Notification,{message:message,color:colorMessage}),React.createElement(Filter,{filterName:filterName,handleFilterChange:handleFilterChange}),React.createElement(\"h2\",null,\"Add new\"),React.createElement(PersonForm,{addNewPerson:addNewPerson,newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange}),React.createElement(\"h2\",null,\"Numbers\"),React.createElement(Persons,{persons:personsToShow,deletePerson:deletePerson}));};export default App;","map":{"version":3,"sources":["/home/flycher/Downloads/phonebook/phonebook-frontend/src/App.js"],"names":["React","useState","useEffect","Persons","PersonForm","Filter","Notification","personServices","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterName","setFilterName","message","setMessage","colorMessage","setColorMessage","getAll","then","response","console","log","length","personsToShow","filter","person","name","toLowerCase","includes","addNewPerson","event","preventDefault","found","find","updatePerson","window","confirm","number","changedPerson","update","id","map","setTimeout","catch","_","newPerson","create","concat","deletePerson","deleteObject","handleNameChange","target","value","handleNumberChange","handleFilterChange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './App.css'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personServices from './services/persons'\n\nconst App = () => {\n\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ colorMessage, setColorMessage ] = useState(true)\n\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n      })\n  }, [])\n  console.log('response', persons.length, 'persons')  \n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()))\n\n  const addNewPerson = (event) => {\n    event.preventDefault()\n\n    const found = persons.find(person => person.name === newName);\n    if(found) {\n      const updatePerson = window.confirm(`${found.name} is already in the phonebook,` + \n        ` replace the old number (${found.number})` +\n        ` with the new number (${newNumber})?`)\n      if (updatePerson){\n        const changedPerson = { ...found, number: newNumber }\n        personServices\n          .update(changedPerson.id, changedPerson)\n          .then(response => {\n            setPersons(persons.map(person => person.id !== response.id ? person : response))\n            setMessage(`Updated ${newName}`)\n            setColorMessage(false)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch(_ => {\n            setMessage(\n              `Information of ${newName} was already removed from server`\n            )\n            setColorMessage(true)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setPersons(persons.filter(person => person.id !== changedPerson.id))\n          })\n      }\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n      personServices\n        .create(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setMessage(`Added ${newName}`)\n          setColorMessage(false)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n  \n  const deletePerson = (id, confirm) => {\n    const found = persons.find(person => person.id === id);\n    if (confirm) {\n      personServices\n      .deleteObject(id)\n      .then(_ => {\n        setPersons(persons.filter(person => person.id !== id))\n        setMessage(`Deleted ${found.name}`)\n          setColorMessage(true)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n      })\n      .catch(_ => {\n        setMessage(\n          `Information of ${found.name} was already removed from server`\n        )\n        setColorMessage(true)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== id))\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilterName(event.target.value)\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} color={colorMessage} />\n      <Filter filterName={filterName} handleFilterChange={handleFilterChange} />\n      <h2>Add new</h2>\n      <PersonForm addNewPerson={addNewPerson} newName={newName} newNumber={newNumber}\n        handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}